---
title: "编译时的类型检查与运行时的实际差异"
author: "Roser"
date: 2025-02-08
image: "images/content/TypeScript.png"
draft: false
tags:
  - TypeScript
---
TS 的类型检查只能检查编译期的类型问题，编译通过并不代表运行时的类型一定就是编译时期望的类型，本质上最终运行的还是 JS。

比如实现 [Chrome Extension 请求与响应](../../Chrome%20Extension/请求与响应.md)时，接收方拿到的都是 JSON 序列化后的数据，因此本质上是一个 Object 对象，仅仅通过 TS 的类型谓词不会在运行时将其转换为目标类型，运行时如果访问了当前 Object 对象没有的字段，同样会报错。

但是上述这种情况一般发生在这种[序列化](序列化和反序列化.md)场景，正常情况下不会出现这种编译期和运行时类型不一致的情况。

上述问题的解决方式就是进行[反序列化](序列化和反序列化.md)，或者严格审查发送放与接收方的协议处理是否匹配并正确处理，这两种方式一个是借助工具，另一个则需要使用者做好检查。一般来说，借助工具要比相信自己来的可靠，是更推荐的做法。

> 只要能够有字段确认类型，并且使用时不设计类型（继承链检查），其实不进行反序列化，编译期通过类型检查，也能够获取到正确的结果。但是如果用到类型（例如多态）则必须反序列化。