---
title: "Deterministic Lockstep"
author: "Roser"
date: 2025-05-09
image: "images/content/Network.png"
draft: false
tags:
  - Network
  - MultiplayerGame
  - Review
draft: true
---
Deterministic Lockstep 也可称为帧同步（本文称为 DL），这是最简单的一种同步策略，完全通过服务器进行玩家间的同步。所有的计算操作均放在服务器上，客户端只是作为服务器的结果展示。

DL 主要用于同步**输入操作**，服务端收集所有玩家输入，在统一**逻辑帧**内执行，所有客户端运行**相同逻辑**，得到**相同结果**。该技术依赖完全确定性，即每台机器运行逻辑一致，浮点数计算一致，随机数一致，对于相同的输入操作得到相同的输入结果。

为了防止掉帧和延迟错位，还需要引入延迟补偿机制。

Lockstep 的缺点很明显，服务器压力很大，且延迟对每个玩家的影响会非常明显。当玩家较多时，需要等待所有玩家在当前帧的输入，低延迟玩家会被高延迟玩家影响。一般来说，Lockstep 只适用于最多 `2~4` 人的游戏。

对于应该使用 TCP 还是 UDP，需要根据具体情况进行选择，并且一般来说，UDP 对网络质量的容忍度更高。虽然 UDP 是不可靠传输协议，但是通过在应用层进行一些改变，可以让其***更可靠***，并且减少 TCP 协议**强硬地**为了保证可靠性而做出的延迟牺牲。