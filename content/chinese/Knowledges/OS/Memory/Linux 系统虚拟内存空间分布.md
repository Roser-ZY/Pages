---
title: "Linux 系统虚拟内存空间分布"
author: "Roser"
date: 2025-05-08
image: "images/content/OS.png"
draft: false
tags:
  - OS
  - Review
sr-due: 2025-05-18
sr-interval: 34
sr-ease: 270
---
Linux 系统内存空间分布如下：

![](images/Linux内存空间分布.webp)

- 低地址处为保留段，用于检测地址错误等。
- 代码段：二进制可执行代码。
- 数据段：**已初始化**的静态常量和全局变量。
- BSS 段：**未初始化**的静态变量和全局变量。
- 堆段：动态分配的内存，从低地址向上增长。
- [Linux 文件映射段](../Linux-文件映射段)：动态库、共享内存等，从低地址向上增长（与硬件和内核版本有关）。
- 栈段：局部变量和函数调用的上下文等。栈的大小是固定的，一般是 8MB，但操作系统也提供了参数可以自行配置。入栈时，地址是从高地址向低地址压栈。

> 上文与 Linux 系统的 ELF 可执行文件的格式是基本一致的。

在 Linux 系统中，区分了内核空间和用户空间。用户进程运行在用户空间，而操作系统等运行在内核空间。只有系统中断时，进程才能访问内核空间的内存。

![](images/Linux不同系统空间分布.webp)

虽然每个进程都有独立的虚拟内存，但是内核空间实际上是进程之间共享的。

![](images/Linux内核空间共享.webp)

> 上图的内核空间是高地址，画到下面了。