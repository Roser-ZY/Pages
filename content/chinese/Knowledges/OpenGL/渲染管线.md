---
title: "渲染管线"
author: "Roser"
date: 2025-04-03
image: "images/content/OpenGL.png"
draft: false
tags:
  - OpenGL
  - Review
  - Draft
---
OpenGL 渲染管线的标准流程大致如下：

1. [顶点着色器](Shader/顶点着色器.md)（Vertex Shader）：
    
    - 输入：顶点数据（位置、法线、纹理坐标等）。
        
    - 输出：顶点经过变换后的位置以及其他可能的属性（如颜色、法线、纹理坐标等）。
        
    - 变换：顶点着色器将输入的顶点数据（如模型空间的坐标）转换为**裁剪空间**的坐标，通常使用模型视图矩阵和投影矩阵的组合来实现。
        
2. **图元装配（Primitive Assembly）**：
    
    - 输入：顶点着色器输出的顶点数据。
        
    - 输出：图元（如三角形、线段、点等）。在这一阶段，OpenGL 会根据顶点数据生成几何图元。
        
3. **裁剪（Clipping）**：
    
    - 输入：图元数据。
        
    - 输出：裁剪后的图元。裁剪是为了确保在投影之后，超出裁剪空间边界的顶点会被丢弃，避免不必要的计算。
        
4. **透视除法（Perspective Division）**：
    
    - 输入：裁剪空间中的四维坐标（`x`, `y`, `z`, `w`）。
        
    - 输出：经过透视除法处理后的标准化设备坐标（NDC），每个坐标分量除以 `w`。
        
    - 透视除法后，顶点坐标将被转换到 NDC 空间，其中坐标范围通常为 `-1` 到 `1`。
        
5. **视口变换（Viewport Transformation）**：
    
    - 输入：标准化设备坐标（NDC）。
        
    - 输出：屏幕坐标系中的坐标。视口变换是将 NDC 坐标映射到窗口坐标系的过程。
        
6. **光栅化（Rasterization）**：
    
    - 输入：经过视口变换的图元（通常是三角形）。
        
    - 输出：片元。每个片元表示屏幕上的一个像素及其相关属性（如颜色、深度等）。
        
7. [片段着色器](Shader/片段着色器.md)（Fragment Shader）**：
    
    - 输入：光栅化阶段生成的片元。
        
    - 输出：每个片元的颜色值（以及可能的深度值）。片元着色器根据像素着色、纹理映射、光照等信息来计算最终颜色。
        
8. **深度测试与混合（Depth Test & Blending）**：
    
    - 输入：片元着色器输出的颜色和深度值。
        
    - 输出：最终的颜色值。这一步进行深度测试来决定哪个片元应该被保留，并根据情况进行颜色混合。

> 这一步除了深度测试还有其他测试。

9. **最终帧缓冲输出（Framebuffer Output）**：
    
    - 输入：通过深度测试和混合后的颜色值。
        
    - 输出：显示设备上的最终图像。

每次调用绘制图元都会启动渲染管线。