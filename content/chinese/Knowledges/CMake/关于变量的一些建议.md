---
title: "关于变量的一些建议"
author: "Roser"
date: 2025-05-09
image: "images/content/CMake.png"
draft: false
tags:
  - CMake
  - Variable
---
CMake Gui 是一个非常有用且快速的方式来设置一些项目选项和变量。

尽量使用缓存变量来控制 CMake 行为，而不是通过一些外部编译脚本。

避免依赖环境变量，而是使用缓存变量或普通变量，编译过程应该是可预测且很容易配置的，使用环境变量很容易让整个编译过程变得不可预测，会对新接手项目或者开发新手造成很大的负担。

尽早建立变量名称规范，并且要尽量保证可维护性。比如添加变量类型前缀等（因为 CMakeLists.txt 一般是没有类型提示的），并且考虑到未来可能将当前项目转换为 Subdirectory 的可能性，为了避免变量命名冲突，也应该为变量添加与项目相关的前缀（或者后缀，更推荐前缀）。

Message 应该总是提供一个 Mode，如果一个消息是一个常见消息，尽量使用 STATUS 而不是无模式类型（无模式类型和 STATUS 的表现是不一样的）。

CMake 提供了大量的预定义变量，用于提供系统相关细节信息，或者影响 CMake 表现。建议偶尔去看下 CMake 官方文档提供的预定义变量，可能会对自己的项目有用，并在这个过程中熟悉各个变量的使用。