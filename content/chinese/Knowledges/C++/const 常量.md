---
title: "const 常量"
author: "Roser"
date: 2025-04-14
image: "images/content/C++.png"
draft: false
tags:
  - Cpp
  - Review
draft: true
---
# 类外常量的内部链接性

如果在 `.cpp` 或 `.h` 中定义了类外常量（没有 `static` 修饰），他们的表现和加了 `static` 一样，但并不是 `static` 的语法糖，而是视为内部链接性（Internal link）。

如果希望改变其链接性为外部链接，则需要使用 `extern` 在需要的编译单元进行修饰。

 > 如果本身已经使用了 `static` 修饰，则无法再修改为外部链接性。
 
普通变量是没有这种默认特性的，最典型的就是在头文件中声明 `const` 常量，则每个引用它的源文件都会有自己的 `const` 常量，而普通变量则会报重定义错误。

> C++17 引入了 `inline` 全局变量，可以使得普通全局变量在头文件中定义时，不会报重定义错误，前提是要用 `inline` 修饰。
# 类内静态常量

定义类内的静态常量时，可以采用声明时初始化的方式赋初值。此时如果不需要引用其地址，则不需要再写定义式。否则，需要在 cpp 中添加定义式，但是定义式可以不写初值。

或者干脆直接在定义式中写初值，不采用声明时初始化。