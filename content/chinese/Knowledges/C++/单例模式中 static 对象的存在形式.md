---
title: "单例模式中 static 对象的存在形式"
author: "Roser"
date: 2025-02-18
image: "images/content/C++.png"
draft: false
tags:
  - Cpp
  - DesignPattern
---
在 C++ 中创建单例比较常见的形式就是使用静态成员函数，并在其中定义一个该单例类的静态变量，然后返出该变量的指针或引用。

该 `static` 变量在程序启动时就已经分配内存并进行内存清零，但是并未进行初始化（对于非 POD 对象来说，未调用构造函数，此时该对象还不可用）。当调用该 `static` 函数时，会对其进行初始化（非 POD 对象调用构造函数，C++11 保证了线程安全），如果是 POD 对象如果没有赋初值则什么也不做。

C++ 之所以推荐使用静态函数这种方式来访问单例，主要是为了确保访问单例时，单例已经被初始化，因为全局静态对象的初始化顺序是不能保证的，但局部静态变量的初始化顺序会在调用该函数并执行到初始化代码时进行。