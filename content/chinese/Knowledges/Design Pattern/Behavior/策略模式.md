---
title: "策略模式"
author: "Roser"
date: 2025-05-08
image: "images/content/Design Pattern.png"
draft: false
tags:
  - DesignPattern
  - Review
sr-due: 2025-05-08
sr-interval: 15
sr-ease: 250
---
# 使用场景

当某个功能需要多种算法，并且希望能够动态切换算法时，可以考虑使用策略模式。

例如一款地图程序，可能需要包含多种出行方式的路线规划，例如驾车、骑行、步行等。当用户选择不同的出行方式时，应当给出不同的路线规划。

如果仅通过 `if-else` 来控制策略，非常不利于代码维护，每次新增策略时都需要修改代码。

- ? 当你想使用对象中各种不同的算法变体， 并希望能在运行时切换算法时， 可使用策略模式。

- ? 当你有许多仅在执行某些行为时略有不同的相似类时， 可使用策略模式。

- ? 如果算法在上下文的逻辑中不是特别重要， 使用该模式能将类的业务逻辑与其算法实现细节隔离开来。

- ? 当类中使用了复杂条件运算符以在同一算法的不同变体中切换时， 可使用该模式。
# 解决方案

**策略模式**能定义一系列算法，并将每种算法封装到独立的类中，以使算法对象能够相互替换。

每种算法都是一个策略类，可通过一个上下文引用这些策略类，进而动态修改策略。

上下文不负责选择算法，而是将这个权力交给使用者。上下文实际上不需要知道策略是什么，只需要知道策略接口并在自身的工作中触发该算法即可。

通过这种方式，上下文可与算法解耦。

# 结构

![](images/策略模式类图示意.png)

- **上下文**
	维护只想具体策略的引用，仅通过策略接口与该对象进行交流。另外提供一个接口，用于设置执行的策略。
- **策略接口**
	是所有具体策略的通用接口，声明一个上下文用于执行策略的入口方法。
- **具体策略**
	实现了上下文所用算法的各种不同变体。
- **客户端**
	可以控制上下文所执行的策略，通过讲一个特定的策略对象传递给上下文。
### 优点

- o 可以在运行时切换对象内的算法。
- o 可以将算法的实现和使用算法的代码隔离开。
- o 可以用组合代替继承。
- o 遵循开闭原则。
### 缺点

- x 如果算法极少改变，且算法数量固定，使用该模式只会增加复杂度。
- x 客户端必须知晓策略间的不同，它需要选择合适的策略。
- x 许多现代编程语言支持匿名函数，使用一组匿名函数来实现不同版本的算法，本质上和策略模式一样。